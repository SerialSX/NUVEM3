index.html:



<!DOCTYPE html>

<html lang="pt-BR">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>Agenda MÃ©dica - Login</title>

Â  Â  <link rel="stylesheet" href="styles/main.css">

Â  Â  <script src="https://npmcdn.com/parse/dist/parse.min.js"></script>

Â  Â  <script src="scripts/parseConfig.js"></script>

</head>

<body>

Â  Â  <div class="login-wrapper">

Â  Â  Â  Â  <div class="login-container">

Â  Â  Â  Â  Â  Â  <h1>Agenda MÃ©dica</h1>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="tabs">

Â  Â  Â  Â  Â  Â  Â  Â  <button class="tab-button active" onclick="openTab('paciente', event)">Paciente</button>

Â  Â  Â  Â  Â  Â  Â  Â  <button class="tab-button" onclick="openTab('medico', event)">MÃ©dico</button>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <!-- FormulÃ¡rio Paciente -->

Â  Â  Â  Â  Â  Â  <div id="paciente" class="tab-content active">

Â  Â  Â  Â  Â  Â  Â  Â  <form id="form-paciente">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" placeholder="CPF" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" placeholder="Senha" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Entrar</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="cadastro-link">NÃ£o tem conta? <a href="#" onclick="mostrarCadastro('paciente')">Cadastre-se</a></p>

Â  Â  Â  Â  Â  Â  Â  Â  </form>



Â  Â  Â  Â  Â  Â  Â  Â  <form id="cadastro-paciente" class="hidden">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" placeholder="CPF" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" placeholder="Nome Completo" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel" placeholder="Telefone" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Tem plano de saÃºde?</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="sim">Sim</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="nao">NÃ£o</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" placeholder="Senha" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Cadastrar</button>

Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <!-- FormulÃ¡rio MÃ©dico -->

Â  Â  Â  Â  Â  Â  <div id="medico" class="tab-content hidden">

Â  Â  Â  Â  Â  Â  Â  Â  <form id="form-medico">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" placeholder="CRM" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" placeholder="Senha" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Entrar</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="cadastro-link">NÃ£o tem conta? <a href="#" onclick="mostrarCadastro('medico')">Cadastre-se</a></p>

Â  Â  Â  Â  Â  Â  Â  Â  </form>



Â  Â  Â  Â  Â  Â  Â  Â  <form id="cadastro-medico" class="hidden">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" placeholder="CRM" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" placeholder="Nome Completo" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Especialidade</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="cardiologia">Cardiologia</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="pediatria">Pediatria</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" placeholder="Senha" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Cadastrar</button>

Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script src="scripts/app.js"></script>

Â  Â  <script>

Â  Â  Â  Â  if (window.location.pathname.includes('index.html')) {

Â  Â  Â  Â  Â  Â  sessionStorage.removeItem('usuarioLogado');

Â  Â  Â  Â  }

Â  Â  </script>

</body>

</html>





medico.html:Â 



<!DOCTYPE html>

<html lang="pt-BR">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>MÃ©dico - Agenda MÃ©dica</title>

Â  Â  <link rel="stylesheet" href="styles/main.css">

Â  Â  <link rel="stylesheet" href="styles/sidebar.css">

Â  Â  <link rel="stylesheet" href="styles/medico.css">

Â  Â  <script src="https://npmcdn.com/parse/dist/parse.min.js"></script>

Â  Â  <script src="scripts/parseConfig.js"></script>

Â  Â  <script src="scripts/auth.js"></script>

</head>

<body>

Â  Â  <script>

Â  Â  Â  Â  (async function() {

Â  Â  Â  Â  Â  Â  const usuario = await checkAuth('medico');

Â  Â  Â  Â  Â  Â  if (!usuario) {

Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = 'index.html';

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Atualiza os dados do mÃ©dico na sidebar

Â  Â  Â  Â  Â  Â  const medico = Parse.User.current();

Â  Â  Â  Â  Â  Â  if (medico) {

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('medico-nome').textContent = medico.get('nome');

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('medico-especialidade').textContent = medico.get('especialidade');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  })();

Â  Â  </script>



Â  Â  <div class="dashboard">

Â  Â  Â  Â  <!-- Barra Lateral -->

Â  Â  Â  Â  <div class="sidebar">

Â  Â  Â  Â  Â  Â  <div class="sidebar-header">

Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://via.placeholder.com/80" alt="Foto do MÃ©dico" class="user-avatar">

Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="medico-nome">MÃ©dico</h3>

Â  Â  Â  Â  Â  Â  Â  Â  <p class="especialidade" id="medico-especialidade">Especialidade</p>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <ul class="sidebar-menu">

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#" class="active"><i class="icon">ğŸ“…</i> Agenda</a></li>

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#"><i class="icon">ğŸ‘¨â€âš•ï¸</i> Pacientes</a></li>

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#"><i class="icon">ğŸ’Š</i> PrescriÃ§Ãµes</a></li>

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#"><i class="icon">ğŸ“Š</i> RelatÃ³rios</a></li>

Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="sidebar-footer">

Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" onclick="logout()" class="logout-btn"><i class="icon">ğŸšª</i> Sair</a>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <!-- ConteÃºdo Principal -->

Â  Â  Â  Â  <div class="main-content">

Â  Â  Â  Â  Â  Â  <h2>Agenda do Dia</h2>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="agenda-container">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="prev-day">â—€</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="current-date">Carregando...</h3>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="next-day">â–¶</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div id="lista-consultas">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="loading">Carregando consultas...</p>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script src="scripts/medico.js"></script>

</body>

</html>





paciente.html:



<!DOCTYPE html>

<html lang="pt-BR">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>Paciente - Agenda MÃ©dica</title>

Â  Â  <link rel="stylesheet" href="styles/main.css">

Â  Â  <link rel="stylesheet" href="styles/sidebar.css">

Â  Â  <link rel="stylesheet" href="styles/paciente.css">

Â  Â  <link rel="stylesheet" href="styles/chat.css">

Â  Â  <script src="https://npmcdn.com/parse/dist/parse.min.js"></script>

Â  Â  <script src="scripts/parseConfig.js"></script>

Â  Â  <script src="scripts/auth.js"></script>

</head>

<body>

Â  Â  <script>

Â  Â  Â  Â  (async function() {

Â  Â  Â  Â  Â  Â  const usuario = await checkAuth('paciente');

Â  Â  Â  Â  Â  Â  if (!usuario) {

Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = 'index.html';

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Atualiza o nome do usuÃ¡rio na sidebar

Â  Â  Â  Â  Â  Â  const paciente = Parse.User.current();

Â  Â  Â  Â  Â  Â  if (paciente) {

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('username').textContent = paciente.get('nome');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  })();

Â  Â  </script>



Â  Â  <div class="dashboard">

Â  Â  Â  Â  <!-- Barra Lateral -->

Â  Â  Â  Â  <div class="sidebar">

Â  Â  Â  Â  Â  Â  <div class="sidebar-header">

Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://via.placeholder.com/80" alt="Foto do UsuÃ¡rio" class="user-avatar">

Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="username">UsuÃ¡rio</h3>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <ul class="sidebar-menu">

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#" class="active"><i class="icon">ğŸ“…</i> Agendamentos</a></li>

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#"><i class="icon">ğŸ¥</i> ClÃ­nicas</a></li>

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#" onclick="abrirChat()"><i class="icon">ğŸ’¬</i> Chat</a></li>

Â  Â  Â  Â  Â  Â  Â  Â  <li><a href="#"><i class="icon">âš™ï¸</i> ConfiguraÃ§Ãµes</a></li>

Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="sidebar-footer">

Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" onclick="logout()" class="logout-btn"><i class="icon">ğŸšª</i> Sair</a>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <!-- ConteÃºdo Principal -->

Â  Â  Â  Â  <div class="main-content">

Â  Â  Â  Â  Â  Â  <h2>Agendar Nova Consulta</h2>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <form id="form-agendamento">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="tipo-consulta">Tipo de Consulta</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="tipo-consulta" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Selecione...</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="clinico">ClÃ­nico Geral</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="cardiologista">Cardiologista</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="dermatologista">Dermatologista</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="data-consulta">Data e Hora</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="datetime-local" id="data-consulta" required>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="medico">MÃ©dico</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="medico" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Carregando mÃ©dicos...</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn-primary">Agendar Consulta</button>

Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="agendamentos-list">

Â  Â  Â  Â  Â  Â  Â  Â  <h3>PrÃ³ximas Consultas</h3>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="lista-agendamentos">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="loading">Carregando agendamentos...</p>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <!-- Modal do Chat -->

Â  Â  <div id="chat-modal" class="hidden">

Â  Â  Â  Â  <div class="chat-box">

Â  Â  Â  Â  Â  Â  <div class="chat-header">

Â  Â  Â  Â  Â  Â  Â  Â  <h3>Atendimento Online</h3>

Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="fecharChat()" class="chat-close-btn">âœ•</button>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div id="chat-mensagens">

Â  Â  Â  Â  Â  Â  Â  Â  <p class="loading-chat">Carregando mensagens...</p>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="chat-input-area">

Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="chat-input" placeholder="Digite sua mensagem...">

Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="enviarMensagem()">Enviar</button>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script src="scripts/chat.js"></script>

Â  Â  <script src="scripts/paciente.js"></script>

</body>

</html>





styles/main.css:



/* Reset e ConfiguraÃ§Ãµes Globais */

* {

Â  Â  margin: 0;

Â  Â  padding: 0;

Â  Â  box-sizing: border-box;

Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

}



body {

Â  Â  background: #f0f2f5;

Â  Â  color: #333;

}



/* Login Centralizado */

.login-wrapper {

Â  Â  display: flex;

Â  Â  justify-content: center;

Â  Â  align-items: center;

Â  Â  min-height: 100vh;

Â  Â  padding: 20px;

Â  Â  background: linear-gradient(135deg, #6e8efb, #a777e3);

}



.login-container {

Â  Â  width: 100%;

Â  Â  max-width: 450px;

Â  Â  background: white;

Â  Â  border-radius: 12px;

Â  Â  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);

Â  Â  padding: 30px;

Â  Â  animation: fadeIn 0.4s ease-out;

}



@keyframes fadeIn {

Â  Â  from { opacity: 0; transform: translateY(-15px); }

Â  Â  to { opacity: 1; transform: translateY(0); }

}



/* Abas */

.tabs {

Â  Â  display: flex;

Â  Â  margin-bottom: 20px;

Â  Â  border-radius: 8px;

Â  Â  overflow: hidden;

Â  Â  background: #ecf0f1;

}



.tab-button {

Â  Â  flex: 1;

Â  Â  padding: 12px;

Â  Â  border: none;

Â  Â  background: transparent;

Â  Â  cursor: pointer;

Â  Â  font-weight: 600;

Â  Â  transition: all 0.3s;

}



.tab-button.active {

Â  Â  background: #4CAF50;

Â  Â  color: white;

}



/* FormulÃ¡rios */

.tab-content {

Â  Â  display: none;

}



.tab-content.active {

Â  Â  display: block;

}



input, select, button {

Â  Â  width: 100%;

Â  Â  padding: 12px 15px;

Â  Â  margin: 8px 0;

Â  Â  border: 1px solid #ddd;

Â  Â  border-radius: 6px;

Â  Â  font-size: 15px;

}



button {

Â  Â  background: #4CAF50;

Â  Â  color: white;

Â  Â  border: none;

Â  Â  cursor: pointer;

Â  Â  font-weight: 600;

Â  Â  transition: background 0.3s;

}



button:hover {

Â  Â  background: #3d8b40;

}



.cadastro-link {

Â  Â  text-align: center;

Â  Â  margin-top: 15px;

Â  Â  color: #7f8c8d;

}



.cadastro-link a {

Â  Â  color: #4CAF50;

Â  Â  text-decoration: none;

Â  Â  font-weight: 500;

}



.hidden {

Â  Â  display: none;

}



/* Responsividade */

@media (max-width: 480px) {

Â  Â  .login-container {

Â  Â  Â  Â  padding: 20px;

Â  Â  }

Â  Â Â 

Â  Â  .tab-button {

Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  font-size: 14px;

Â  Â  }

}





styles/chat.css:



/* MODAL DO CHAT */

#chat-modal {

Â  Â  position: fixed;

Â  Â  top: 0;

Â  Â  left: 0;

Â  Â  width: 100%;

Â  Â  height: 100%;

Â  Â  background: rgba(0, 0, 0, 0.7);

Â  Â  display: none;

Â  Â  justify-content: center;

Â  Â  align-items: center;

Â  Â  z-index: 2000;

Â  Â  padding: 20px;

Â  Â  box-sizing: border-box;

}



/* CAIXA DO CHAT */

.chat-box {

Â  Â  width: 100%;

Â  Â  max-width: 400px;

Â  Â  height: 70vh;

Â  Â  max-height: 600px;

Â  Â  background: white;

Â  Â  border-radius: 12px;

Â  Â  overflow: hidden;

Â  Â  display: flex;

Â  Â  flex-direction: column;

Â  Â  box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);

Â  Â  animation: chatFadeIn 0.3s ease-out;

}



@keyframes chatFadeIn {

Â  Â  from { opacity: 0; transform: translateY(20px); }

Â  Â  to { opacity: 1; transform: translateY(0); }

}



/* CABEÃ‡ALHO */

.chat-header {

Â  Â  background: #4CAF50;

Â  Â  color: white;

Â  Â  padding: 15px 20px;

Â  Â  display: flex;

Â  Â  justify-content: space-between;

Â  Â  align-items: center;

Â  Â  position: relative;

}



.chat-header h3 {

Â  Â  margin: 0;

Â  Â  font-size: 16px;

Â  Â  font-weight: 600;

Â  Â  flex: 1;

Â  Â  text-align: center;

}



.chat-close-btn {

Â  Â  background: none;

Â  Â  border: none;

Â  Â  color: white;

Â  Â  font-size: 16px;

Â  Â  cursor: pointer;

Â  Â  padding: 5px;

Â  Â  transition: transform 0.2s;

Â  Â  position: absolute;

Â  Â  right: 10px;

Â  Â  top: 50%;

Â  Â  transform: translateY(-50%);

Â  Â  width: 24px;

Â  Â  height: 24px;

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  justify-content: center;

Â  Â  border-radius: 50%;

}



.chat-close-btn:hover {

Â  Â  background: rgba(255, 255, 255, 0.2);

Â  Â  transform: translateY(-50%) scale(1.1);

}



/* ÃREA DE MENSAGENS */

#chat-mensagens {

Â  Â  flex: 1;

Â  Â  padding: 15px;

Â  Â  overflow-y: auto;

Â  Â  background: #f5f5f5;

Â  Â  display: flex;

Â  Â  flex-direction: column;

Â  Â  gap: 10px;

}



/* ESTILOS DAS MENSAGENS */

.mensagem {

Â  Â  max-width: 85%;

Â  Â  padding: 10px;

Â  Â  border-radius: 12px;

Â  Â  position: relative;

Â  Â  animation: messageFadeIn 0.3s ease-out;

Â  Â  font-size: 14px;

Â  Â  line-height: 1.4;

}



@keyframes messageFadeIn {

Â  Â  from { opacity: 0; transform: translateY(10px); }

Â  Â  to { opacity: 1; transform: translateY(0); }

}



.mensagem-conteudo {

Â  Â  display: flex;

Â  Â  flex-direction: column;

}



.mensagem.usuario {

Â  Â  background: #4CAF50;

Â  Â  color: white;

Â  Â  margin-left: auto;

Â  Â  border-bottom-right-radius: 4px;

}



.mensagem.atendente {

Â  Â  background: white;

Â  Â  color: #333;

Â  Â  margin-right: auto;

Â  Â  border-bottom-left-radius: 4px;

Â  Â  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

}



.hora-mensagem {

Â  Â  font-size: 11px;

Â  Â  opacity: 0.8;

Â  Â  margin-top: 4px;

Â  Â  align-self: flex-end;

}



/* ÃREA DE INPUT */

.chat-input-area {

Â  Â  display: flex;

Â  Â  padding: 12px;

Â  Â  background: white;

Â  Â  border-top: 1px solid #eee;

Â  Â  align-items: center;

}



#chat-input {

Â  Â  flex: 1;

Â  Â  padding: 10px 15px;

Â  Â  border: 1px solid #ddd;

Â  Â  border-radius: 20px;

Â  Â  outline: none;

Â  Â  font-size: 14px;

Â  Â  transition: border-color 0.3s;

}



#chat-input:focus {

Â  Â  border-color: #4CAF50;

}



.chat-input-area button {

Â  Â  margin-left: 8px;

Â  Â  padding: 8px 16px;

Â  Â  border-radius: 20px;

Â  Â  background: #4CAF50;

Â  Â  color: white;

Â  Â  border: none;

Â  Â  cursor: pointer;

Â  Â  font-size: 14px;

Â  Â  transition: background 0.3s;

}



.chat-input-area button:hover {

Â  Â  background: #3d8b40;

}



/* RESPONSIVIDADE */

@media (max-width: 480px) {

Â  Â  .chat-box {

Â  Â  Â  Â  height: 85vh;

Â  Â  Â  Â  max-height: none;

Â  Â  Â  Â  border-radius: 0;

Â  Â  }

Â  Â Â 

Â  Â  #chat-modal {

Â  Â  Â  Â  padding: 0;

Â  Â  }

Â  Â Â 

Â  Â  .mensagem {

Â  Â  Â  Â  max-width: 90%;

Â  Â  }

Â  Â Â 

Â  Â  .chat-header {

Â  Â  Â  Â  padding: 12px;

Â  Â  }

Â  Â Â 

Â  Â  .chat-header h3 {

Â  Â  Â  Â  font-size: 15px;

Â  Â  }

Â  Â Â 

Â  Â  .chat-close-btn {

Â  Â  Â  Â  right: 8px;

Â  Â  }

}



styles/medico.css:



/* ESTILOS GERAIS PARA A PÃGINA DO MÃ‰DICO */

.dashboard {

Â  Â  display: flex;

Â  Â  min-height: 100vh;

Â  Â  overflow-x: hidden;

Â  Â  background-color: #f5f7fa;

}



/* CONTEÃšDO PRINCIPAL */

.main-content {

Â  Â  flex: 1;

Â  Â  margin-left: 280px; /* Largura da sidebar */

Â  Â  padding: 30px;

Â  Â  transition: margin-left 0.3s ease;

Â  Â  min-height: 100vh;

Â  Â  background-color: #f5f7fa;

}



/* CABEÃ‡ALHO DA AGENDA */

.agenda-container {

Â  Â  background: white;

Â  Â  padding: 30px;

Â  Â  border-radius: 12px;

Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

}



.calendar-header {

Â  Â  display: flex;

Â  Â  justify-content: space-between;

Â  Â  align-items: center;

Â  Â  margin-bottom: 25px;

Â  Â  padding-bottom: 15px;

Â  Â  border-bottom: 1px solid #eee;

}



.calendar-header h3 {

Â  Â  font-size: 20px;

Â  Â  color: #2c3e50;

Â  Â  font-weight: 600;

Â  Â  margin: 0;

}



.calendar-header button {

Â  Â  background: none;

Â  Â  border: none;

Â  Â  font-size: 22px;

Â  Â  cursor: pointer;

Â  Â  color: #4CAF50;

Â  Â  padding: 5px 15px;

Â  Â  border-radius: 5px;

Â  Â  transition: background 0.3s;

}



.calendar-header button:hover {

Â  Â  background: rgba(76, 175, 80, 0.1);

}



/* LISTA DE CONSULTAS */

#lista-consultas {

Â  Â  display: flex;

Â  Â  flex-direction: column;

Â  Â  gap: 15px;

}



.consulta-item {

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  padding: 20px;

Â  Â  background: #f9f9f9;

Â  Â  border-radius: 10px;

Â  Â  transition: all 0.3s;

Â  Â  border-left: 4px solid #4CAF50;

}



.consulta-item:hover {

Â  Â  transform: translateY(-2px);

Â  Â  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

}



.consulta-horario {

Â  Â  font-weight: 600;

Â  Â  color: #4CAF50;

Â  Â  min-width: 80px;

Â  Â  font-size: 15px;

}



.consulta-info {

Â  Â  flex: 1;

Â  Â  padding: 0 20px;

}



.consulta-info h4 {

Â  Â  margin-bottom: 5px;

Â  Â  color: #2c3e50;

Â  Â  font-size: 16px;

}



.consulta-info p {

Â  Â  color: #7f8c8d;

Â  Â  font-size: 14px;

}



.observacao {

Â  Â  font-style: italic;

Â  Â  color: #e67e22 !important;

Â  Â  margin-top: 5px;

Â  Â  font-size: 13px;

}



.status {

Â  Â  font-weight: 600;

Â  Â  font-size: 13px;

Â  Â  padding: 3px 8px;

Â  Â  border-radius: 4px;

Â  Â  background: #e8f5e9;

Â  Â  color: #4CAF50;

Â  Â  display: inline-block;

}



.consulta-actions {

Â  Â  display: flex;

Â  Â  gap: 10px;

}



.btn-confirm, .btn-cancel {

Â  Â  border: none;

Â  Â  width: 40px;

Â  Â  height: 40px;

Â  Â  border-radius: 50%;

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  justify-content: center;

Â  Â  cursor: pointer;

Â  Â  font-size: 18px;

Â  Â  transition: transform 0.3s;

}



.btn-confirm {

Â  Â  background: #4CAF50;

Â  Â  color: white;

}



.btn-cancel {

Â  Â  background: #e74c3c;

Â  Â  color: white;

}



.btn-confirm:hover, .btn-cancel:hover {

Â  Â  transform: scale(1.1);

}



/* MENSAGENS DE ESTADO */

.empty-message, .loading, .error-message {

Â  Â  text-align: center;

Â  Â  padding: 40px;

Â  Â  color: #7f8c8d;

Â  Â  font-size: 16px;

}



.error-message {

Â  Â  color: #e74c3c;

}



/* BOTÃƒO DE MENU PARA MOBILE */

.menu-toggle {

Â  Â  position: fixed;

Â  Â  top: 15px;

Â  Â  left: 15px;

Â  Â  z-index: 1100;

Â  Â  font-size: 24px;

Â  Â  cursor: pointer;

Â  Â  color: white;

Â  Â  background: #4CAF50;

Â  Â  width: 40px;

Â  Â  height: 40px;

Â  Â  border-radius: 50%;

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  justify-content: center;

Â  Â  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);

Â  Â  display: none;

}



/* RESPONSIVIDADE */

@media (max-width: 1200px) {

Â  Â  .consulta-item {

Â  Â  Â  Â  flex-wrap: wrap;

Â  Â  }

Â  Â Â 

Â  Â  .consulta-actions {

Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  justify-content: flex-end;

Â  Â  Â  Â  margin-top: 15px;

Â  Â  }

}



@media (max-width: 992px) {

Â  Â  .sidebar {

Â  Â  Â  Â  transform: translateX(-100%);

Â  Â  Â  Â  transition: transform 0.3s ease;

Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  height: 100vh;

Â  Â  }

Â  Â Â 

Â  Â  .sidebar.active {

Â  Â  Â  Â  transform: translateX(0);

Â  Â  }

Â  Â Â 

Â  Â  .main-content {

Â  Â  Â  Â  margin-left: 0;

Â  Â  Â  Â  padding: 80px 20px 30px;

Â  Â  }

Â  Â Â 

Â  Â  .menu-toggle {

Â  Â  Â  Â  display: flex;

Â  Â  }

}



@media (max-width: 768px) {

Â  Â  .consulta-item {

Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  align-items: flex-start;

Â  Â  }

Â  Â Â 

Â  Â  .consulta-info {

Â  Â  Â  Â  padding: 15px 0;

Â  Â  Â  Â  width: 100%;

Â  Â  }

Â  Â Â 

Â  Â  .consulta-actions {

Â  Â  Â  Â  justify-content: flex-start;

Â  Â  Â  Â  width: 100%;

Â  Â  }

Â  Â Â 

Â  Â  .agenda-container {

Â  Â  Â  Â  padding: 20px;

Â  Â  }

}



@media (max-width: 480px) {

Â  Â  .main-content {

Â  Â  Â  Â  padding: 70px 15px 20px;

Â  Â  }

Â  Â Â 

Â  Â  .agenda-container {

Â  Â  Â  Â  padding: 15px;

Â  Â  }

Â  Â Â 

Â  Â  .calendar-header h3 {

Â  Â  Â  Â  font-size: 18px;

Â  Â  }

}





styles/paciente.css:



/* ESTILOS GERAIS PARA A PÃGINA DO PACIENTE */

.dashboard {

Â  Â  display: flex;

Â  Â  min-height: 100vh;

Â  Â  overflow-x: hidden;

Â  Â  background-color: #f5f7fa;

}



/* BARRA LATERAL - Definida no sidebar.css */



/* CONTEÃšDO PRINCIPAL */

.main-content {

Â  Â  flex: 1;

Â  Â  margin-left: 280px; /* Largura da sidebar */

Â  Â  padding: 30px;

Â  Â  transition: margin-left 0.3s ease;

Â  Â  min-height: 100vh;

Â  Â  background-color: #f5f7fa;

}



/* FORMULÃRIO DE AGENDAMENTO */

#form-agendamento {

Â  Â  background: white;

Â  Â  padding: 30px;

Â  Â  border-radius: 12px;

Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

Â  Â  margin-bottom: 30px;

}



.form-group {

Â  Â  margin-bottom: 20px;

}



.form-group label {

Â  Â  display: block;

Â  Â  margin-bottom: 8px;

Â  Â  font-weight: 600;

Â  Â  color: #2c3e50;

Â  Â  font-size: 14px;

}



.form-group input,

.form-group select {

Â  Â  width: 100%;

Â  Â  padding: 12px 15px;

Â  Â  border: 1px solid #e0e0e0;

Â  Â  border-radius: 8px;

Â  Â  font-size: 15px;

Â  Â  transition: border-color 0.3s;

}



.form-group input:focus,

.form-group select:focus {

Â  Â  border-color: #4CAF50;

Â  Â  outline: none;

}



/* LISTA DE AGENDAMENTOS */

.agendamentos-list {

Â  Â  background: white;

Â  Â  padding: 30px;

Â  Â  border-radius: 12px;

Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

}



.agendamentos-list h3 {

Â  Â  margin-bottom: 20px;

Â  Â  color: #2c3e50;

Â  Â  font-size: 20px;

}



.agendamento-item {

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  padding: 20px;

Â  Â  margin-bottom: 15px;

Â  Â  background: #f9f9f9;

Â  Â  border-radius: 10px;

Â  Â  transition: all 0.3s;

Â  Â  border-left: 4px solid #4CAF50;

}



.agendamento-item:hover {

Â  Â  transform: translateY(-2px);

Â  Â  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

}



.agendamento-data {

Â  Â  font-weight: 600;

Â  Â  color: #4CAF50;

Â  Â  min-width: 200px;

Â  Â  font-size: 15px;

}



.agendamento-info {

Â  Â  flex: 1;

Â  Â  padding: 0 20px;

}



.agendamento-info h4 {

Â  Â  margin-bottom: 5px;

Â  Â  color: #2c3e50;

Â  Â  font-size: 16px;

}



.agendamento-info p {

Â  Â  color: #7f8c8d;

Â  Â  font-size: 14px;

}



.status {

Â  Â  font-weight: 600;

Â  Â  font-size: 13px;

Â  Â  padding: 3px 8px;

Â  Â  border-radius: 4px;

Â  Â  background: #e8f5e9;

Â  Â  color: #4CAF50;

Â  Â  display: inline-block;

}



.btn-cancel {

Â  Â  background: #e74c3c;

Â  Â  color: white;

Â  Â  border: none;

Â  Â  padding: 10px 20px;

Â  Â  border-radius: 6px;

Â  Â  cursor: pointer;

Â  Â  font-weight: 600;

Â  Â  transition: background 0.3s;

}



.btn-cancel:hover {

Â  Â  background: #c0392b;

}



/* MENSAGENS DE ESTADO */

.loading, .empty, .error {

Â  Â  text-align: center;

Â  Â  padding: 40px;

Â  Â  color: #7f8c8d;

Â  Â  font-size: 16px;

}



.error {

Â  Â  color: #e74c3c;

}



/* BOTÃƒO DE MENU PARA MOBILE */

.menu-toggle {

Â  Â  position: fixed;

Â  Â  top: 15px;

Â  Â  left: 15px;

Â  Â  z-index: 1100;

Â  Â  font-size: 24px;

Â  Â  cursor: pointer;

Â  Â  color: white;

Â  Â  background: #4CAF50;

Â  Â  width: 40px;

Â  Â  height: 40px;

Â  Â  border-radius: 50%;

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  justify-content: center;

Â  Â  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);

Â  Â  display: none;

}



/* RESPONSIVIDADE */

@media (max-width: 1200px) {

Â  Â  .agendamento-data {

Â  Â  Â  Â  min-width: 180px;

Â  Â  }

}



@media (max-width: 992px) {

Â  Â  .sidebar {

Â  Â  Â  Â  transform: translateX(-100%);

Â  Â  Â  Â  transition: transform 0.3s ease;

Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  height: 100vh;

Â  Â  }

Â  Â Â 

Â  Â  .sidebar.active {

Â  Â  Â  Â  transform: translateX(0);

Â  Â  }

Â  Â Â 

Â  Â  .main-content {

Â  Â  Â  Â  margin-left: 0;

Â  Â  Â  Â  padding: 80px 20px 30px;

Â  Â  }

Â  Â Â 

Â  Â  .menu-toggle {

Â  Â  Â  Â  display: flex;

Â  Â  }

}



@media (max-width: 768px) {

Â  Â  .agendamento-item {

Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  align-items: flex-start;

Â  Â  }

Â  Â Â 

Â  Â  .agendamento-data {

Â  Â  Â  Â  min-width: 100%;

Â  Â  Â  Â  margin-bottom: 10px;

Â  Â  }

Â  Â Â 

Â  Â  .agendamento-info {

Â  Â  Â  Â  padding: 15px 0;

Â  Â  Â  Â  width: 100%;

Â  Â  }

Â  Â Â 

Â  Â  .btn-cancel {

Â  Â  Â  Â  align-self: flex-end;

Â  Â  Â  Â  margin-top: 10px;

Â  Â  }

Â  Â Â 

Â  Â  #form-agendamento,Â 

Â  Â  .agendamentos-list {

Â  Â  Â  Â  padding: 20px;

Â  Â  }

}



@media (max-width: 480px) {

Â  Â  .main-content {

Â  Â  Â  Â  padding: 70px 15px 20px;

Â  Â  }

Â  Â Â 

Â  Â  #form-agendamento,Â 

Â  Â  .agendamentos-list {

Â  Â  Â  Â  padding: 15px;

Â  Â  }

}





styles/sidebar.css:



/* BARRA LATERAL */

.sidebar {

Â  Â  width: 280px;

Â  Â  background: linear-gradient(135deg, #2c3e50, #34495e);

Â  Â  color: white;

Â  Â  height: 100vh;

Â  Â  position: fixed;

Â  Â  box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);

Â  Â  display: flex;

Â  Â  flex-direction: column;

Â  Â  z-index: 100;

Â  Â  transition: transform 0.3s ease;

}



.sidebar-header {

Â  Â  padding: 30px 20px;

Â  Â  text-align: center;

Â  Â  border-bottom: 1px solid rgba(255, 255, 255, 0.1);

}



.user-avatar {

Â  Â  width: 80px;

Â  Â  height: 80px;

Â  Â  border-radius: 50%;

Â  Â  object-fit: cover;

Â  Â  margin-bottom: 15px;

Â  Â  border: 3px solid rgba(255, 255, 255, 0.2);

Â  Â  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);

}



.sidebar-header h3 {

Â  Â  margin: 10px 0 5px;

Â  Â  font-size: 18px;

Â  Â  font-weight: 600;

}



.especialidade {

Â  Â  font-size: 14px;

Â  Â  color: #bdc3c7;

Â  Â  font-weight: 300;

}



.sidebar-menu {

Â  Â  list-style: none;

Â  Â  flex: 1;

Â  Â  padding: 20px 0;

Â  Â  overflow-y: auto;

}



.sidebar-menu li a {

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  padding: 12px 25px;

Â  Â  color: #ecf0f1;

Â  Â  text-decoration: none;

Â  Â  transition: all 0.3s;

Â  Â  font-size: 15px;

Â  Â  font-weight: 500;

}



.sidebar-menu li a:hover {

Â  Â  background: rgba(255, 255, 255, 0.1);

}



.sidebar-menu li a.active {

Â  Â  background: rgba(255, 255, 255, 0.2);

Â  Â  border-left: 4px solid #4CAF50;

}



.sidebar-menu .icon {

Â  Â  margin-right: 12px;

Â  Â  font-size: 18px;

}



.sidebar-footer {

Â  Â  padding: 20px;

Â  Â  border-top: 1px solid rgba(255, 255, 255, 0.1);

}



.logout-btn {

Â  Â  display: flex;

Â  Â  align-items: center;

Â  Â  justify-content: center;

Â  Â  color: white;

Â  Â  text-decoration: none;

Â  Â  padding: 10px;

Â  Â  border-radius: 5px;

Â  Â  background: rgba(255, 255, 255, 0.1);

Â  Â  transition: background 0.3s;

Â  Â  font-weight: 500;

}



.logout-btn:hover {

Â  Â  background: rgba(255, 255, 255, 0.2);

}



.logout-btn .icon {

Â  Â  margin-right: 8px;

}



/* RESPONSIVIDADE */

@media (max-width: 768px) {

Â  Â  .sidebar {

Â  Â  Â  Â  width: 250px;

Â  Â  }

Â  Â Â 

Â  Â  .sidebar-header {

Â  Â  Â  Â  padding: 20px 15px;

Â  Â  }

Â  Â Â 

Â  Â  .user-avatar {

Â  Â  Â  Â  width: 70px;

Â  Â  Â  Â  height: 70px;

Â  Â  }

Â  Â Â 

Â  Â  .sidebar-menu li a {

Â  Â  Â  Â  padding: 10px 20px;

Â  Â  }

}



scripts/app.js:



// FunÃ§Ãµes de UI

function openTab(tabName, event) {

Â  Â  document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));

Â  Â  document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));

Â  Â  document.getElementById(tabName).classList.add('active');

Â  Â  event.currentTarget.classList.add('active');

}



function mostrarCadastro(tipo) {

Â  Â  document.getElementById(`form-${tipo}`).classList.toggle('hidden');

Â  Â  document.getElementById(`cadastro-${tipo}`).classList.toggle('hidden');

}



// Cadastro de Paciente

document.getElementById('cadastro-paciente').addEventListener('submit', async function(e) {

Â  Â  e.preventDefault();

Â  Â  const form = e.target;

Â  Â Â 

Â  Â  try {

Â  Â  Â  Â  // Criar usuÃ¡rio

Â  Â  Â  Â  const user = new Parse.User();

Â  Â  Â  Â  user.set('username', form[0].value); // CPF

Â  Â  Â  Â  user.set('password', form[4].value);

Â  Â  Â  Â  user.set('email', `${form[0].value}@paciente.com`);

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Criar paciente

Â  Â  Â  Â  const Paciente = Parse.Object.extend('Paciente');

Â  Â  Â  Â  const paciente = new Paciente();

Â  Â  Â  Â  paciente.set('cpf', form[0].value);

Â  Â  Â  Â  paciente.set('nome', form[1].value);

Â  Â  Â  Â  paciente.set('telefone', form[2].value);

Â  Â  Â  Â  paciente.set('plano', form[3].value === 'sim');

Â  Â  Â  Â Â 

Â  Â  Â  Â  await user.signUp();

Â  Â  Â  Â  paciente.set('user', user);

Â  Â  Â  Â  await paciente.save();

Â  Â  Â  Â Â 

Â  Â  Â  Â  alert('Cadastro realizado com sucesso!');

Â  Â  Â  Â  form.reset();

Â  Â  Â  Â  mostrarCadastro('paciente');

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro no cadastro:', error);

Â  Â  Â  Â  alert(`Erro: ${error.message}`);

Â  Â  }

});



// Cadastro de MÃ©dico

document.getElementById('cadastro-medico').addEventListener('submit', async function(e) {

Â  Â  e.preventDefault();

Â  Â  const form = e.target;

Â  Â Â 

Â  Â  try {

Â  Â  Â  Â  // Criar usuÃ¡rio

Â  Â  Â  Â  const user = new Parse.User();

Â  Â  Â  Â  user.set('username', form[0].value); // CRM

Â  Â  Â  Â  user.set('password', form[3].value);

Â  Â  Â  Â  user.set('email', `${form[0].value}@medico.com`);

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Criar mÃ©dico

Â  Â  Â  Â  const Medico = Parse.Object.extend('Medico');

Â  Â  Â  Â  const medico = new Medico();

Â  Â  Â  Â  medico.set('crm', form[0].value);

Â  Â  Â  Â  medico.set('nome', form[1].value);

Â  Â  Â  Â  medico.set('especialidade', form[2].value);

Â  Â  Â  Â  medico.set('ativo', true);

Â  Â  Â  Â Â 

Â  Â  Â  Â  await user.signUp();

Â  Â  Â  Â  medico.set('user', user);

Â  Â  Â  Â  await medico.save();

Â  Â  Â  Â Â 

Â  Â  Â  Â  alert('Cadastro mÃ©dico realizado!');

Â  Â  Â  Â  form.reset();

Â  Â  Â  Â  mostrarCadastro('medico');

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro no cadastro mÃ©dico:', error);

Â  Â  Â  Â  alert(`Erro: ${error.message}`);

Â  Â  }

});



// Login

async function fazerLogin(username, password) {

Â  Â  const user = await Parse.User.logIn(username, password);

Â  Â Â 

Â  Â  // Verificar se Ã© mÃ©dico

Â  Â  const Medico = Parse.Object.extend('Medico');

Â  Â  const query = new Parse.Query(Medico);

Â  Â  query.equalTo('user', user);

Â  Â  const medico = await query.first();

Â  Â Â 

Â  Â  if (medico) {

Â  Â  Â  Â  return { tipo: 'medico', user, dados: medico };

Â  Â  } else {

Â  Â  Â  Â  // Verificar se Ã© paciente

Â  Â  Â  Â  const Paciente = Parse.Object.extend('Paciente');

Â  Â  Â  Â  const pacienteQuery = new Parse.Query(Paciente);

Â  Â  Â  Â  pacienteQuery.equalTo('cpf', username);

Â  Â  Â  Â  const paciente = await pacienteQuery.first();

Â  Â  Â  Â Â 

Â  Â  Â  Â  if (paciente) {

Â  Â  Â  Â  Â  Â  return { tipo: 'paciente', user, dados: paciente };

Â  Â  Â  Â  }

Â  Â  }

Â  Â Â 

Â  Â  throw new Error('Tipo de usuÃ¡rio nÃ£o identificado');

}



// Login Paciente

document.getElementById('form-paciente').addEventListener('submit', async function(e) {

Â  Â  e.preventDefault();

Â  Â  try {

Â  Â  Â  Â  const { tipo, user, dados } = await fazerLogin(e.target[0].value, e.target[1].value);

Â  Â  Â  Â  if (tipo !== 'paciente') throw new Error('Acesso permitido apenas para pacientes');

Â  Â  Â  Â Â 

Â  Â  Â  Â  sessionStorage.setItem('usuarioLogado', JSON.stringify({

Â  Â  Â  Â  Â  Â  id: user.id,

Â  Â  Â  Â  Â  Â  tipo: 'paciente',

Â  Â  Â  Â  Â  Â  nome: dados.get('nome'),

Â  Â  Â  Â  Â  Â  cpf: dados.get('cpf')

Â  Â  Â  Â  }));

Â  Â  Â  Â Â 

Â  Â  Â  Â  window.location.href = 'paciente.html';

Â  Â  } catch (error) {

Â  Â  Â  Â  alert(error.message);

Â  Â  }

});



// Login MÃ©dico

document.getElementById('form-medico').addEventListener('submit', async function(e) {

Â  Â  e.preventDefault();

Â  Â  try {

Â  Â  Â  Â  const { tipo, user, dados } = await fazerLogin(e.target[0].value, e.target[1].value);

Â  Â  Â  Â  if (tipo !== 'medico') throw new Error('Acesso permitido apenas para mÃ©dicos');

Â  Â  Â  Â Â 

Â  Â  Â  Â  sessionStorage.setItem('usuarioLogado', JSON.stringify({

Â  Â  Â  Â  Â  Â  id: user.id,

Â  Â  Â  Â  Â  Â  tipo: 'medico',

Â  Â  Â  Â  Â  Â  nome: dados.get('nome'),

Â  Â  Â  Â  Â  Â  crm: dados.get('crm'),

Â  Â  Â  Â  Â  Â  especialidade: dados.get('especialidade')

Â  Â  Â  Â  }));

Â  Â  Â  Â Â 

Â  Â  Â  Â  window.location.href = 'medico.html';

Â  Â  } catch (error) {

Â  Â  Â  Â  alert(error.message);

Â  Â  }

});



// Exporta funÃ§Ãµes globais

window.openTab = openTab;

window.mostrarCadastro = mostrarCadastro;





scripts/auth.js:



async function checkAuth(requiredType) {

Â  Â  try {

Â  Â  Â  Â  const currentUser = Parse.User.current();

Â  Â  Â  Â  if (!currentUser) throw new Error('Nenhum usuÃ¡rio logado');

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Verificar sessÃ£o

Â  Â  Â  Â  await currentUser.fetch();

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Buscar dados especÃ­ficos

Â  Â  Â  Â  if (requiredType === 'medico') {

Â  Â  Â  Â  Â  Â  const Medico = Parse.Object.extend('Medico');

Â  Â  Â  Â  Â  Â  const query = new Parse.Query(Medico);

Â  Â  Â  Â  Â  Â  query.equalTo('user', currentUser);

Â  Â  Â  Â  Â  Â  const medico = await query.first();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (!medico) throw new Error('Acesso restrito a mÃ©dicos');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  return {

Â  Â  Â  Â  Â  Â  Â  Â  user: currentUser,

Â  Â  Â  Â  Â  Â  Â  Â  tipo: 'medico',

Â  Â  Â  Â  Â  Â  Â  Â  dados: medico

Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  } else if (requiredType === 'paciente') {

Â  Â  Â  Â  Â  Â  const Paciente = Parse.Object.extend('Paciente');

Â  Â  Â  Â  Â  Â  const query = new Parse.Query(Paciente);

Â  Â  Â  Â  Â  Â  query.equalTo('user', currentUser);

Â  Â  Â  Â  Â  Â  const paciente = await query.first();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (!paciente) throw new Error('Acesso restrito a pacientes');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  return {

Â  Â  Â  Â  Â  Â  Â  Â  user: currentUser,

Â  Â  Â  Â  Â  Â  Â  Â  tipo: 'paciente',

Â  Â  Â  Â  Â  Â  Â  Â  dados: paciente

Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  throw new Error('Tipo de usuÃ¡rio nÃ£o especificado');

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro na autenticaÃ§Ã£o:', error);

Â  Â  Â  Â  await logout();

Â  Â  Â  Â  throw error;

Â  Â  }

}



async function logout() {

Â  Â  try {

Â  Â  Â  Â  await Parse.User.logOut();

Â  Â  Â  Â  sessionStorage.removeItem('usuarioLogado');

Â  Â  Â  Â  window.location.href = 'index.html';

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao fazer logout:', error);

Â  Â  }

}



// VerificaÃ§Ã£o periÃ³dica da sessÃ£o

setInterval(async () => {

Â  Â  const user = Parse.User.current();

Â  Â  if (user) {

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  await user.fetch();

Â  Â  Â  Â  } catch (e) {

Â  Â  Â  Â  Â  Â  await logout();

Â  Â  Â  Â  }

Â  Â  }

}, 5 * 60 * 1000); // 5 minutos



// Exporta para mÃ³dulos

if (typeof module !== 'undefined' && module.exports) {

Â  Â  module.exports = { checkAuth, logout };

}





scripts/chat.js:



let chatAberto = false;

let chatAtivo = null;



document.addEventListener('DOMContentLoaded', async function() {

Â  Â  await carregarHistoricoChat();

Â  Â Â 

Â  Â  document.addEventListener('keydown', function(e) {

Â  Â  Â  Â  if (e.key === 'Escape' && chatAberto) {

Â  Â  Â  Â  Â  Â  fecharChat();

Â  Â  Â  Â  }

Â  Â  });

});



async function carregarHistoricoChat() {

Â  Â  const chatMensagens = document.getElementById('chat-mensagens');

Â  Â  chatMensagens.innerHTML = '<p class="loading-chat">Carregando mensagens...</p>';

Â  Â Â 

Â  Â  try {

Â  Â  Â  Â  const paciente = await getPacienteAtual();

Â  Â  Â  Â  if (!paciente) throw new Error('Paciente nÃ£o encontrado');

Â  Â  Â  Â Â 

Â  Â  Â  Â  const mensagens = await buscarMensagens(paciente.id);

Â  Â  Â  Â Â 

Â  Â  Â  Â  chatMensagens.innerHTML = '';

Â  Â  Â  Â Â 

Â  Â  Â  Â  if (mensagens.length === 0) {

Â  Â  Â  Â  Â  Â  chatMensagens.innerHTML = '<p class="empty-chat">Nenhuma mensagem ainda. Inicie a conversa!</p>';

Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  for (const msg of mensagens) {

Â  Â  Â  Â  Â  Â  renderMensagem({

Â  Â  Â  Â  Â  Â  Â  Â  texto: msg.get('texto'),

Â  Â  Â  Â  Â  Â  Â  Â  tipo: msg.get('tipo'),

Â  Â  Â  Â  Â  Â  Â  Â  hora: formatarHora(msg.createdAt)

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  rolarParaUltimaMensagem();

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao carregar chat:', error);

Â  Â  Â  Â  chatMensagens.innerHTML = '<p class="error-chat">Erro ao carregar mensagens</p>';

Â  Â  }

}



async function getPacienteAtual() {

Â  Â  try {

Â  Â  Â  Â  const Paciente = Parse.Object.extend('Paciente');

Â  Â  Â  Â  const query = new Parse.Query(Paciente);

Â  Â  Â  Â  query.equalTo('user', Parse.User.current());

Â  Â  Â  Â  return await query.first();

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao buscar paciente:', error);

Â  Â  Â  Â  return null;

Â  Â  }

}



async function buscarMensagens(pacienteId) {

Â  Â  try {

Â  Â  Â  Â  const Chat = Parse.Object.extend('Chat');

Â  Â  Â  Â  const query = new Parse.Query(Chat);

Â  Â  Â  Â  query.equalTo('pacienteId', pacienteId);

Â  Â  Â  Â  query.ascending('createdAt');

Â  Â  Â  Â  query.limit(100);

Â  Â  Â  Â  return await query.find();

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao buscar mensagens:', error);

Â  Â  Â  Â  return [];

Â  Â  }

}



function abrirChat() {

Â  Â  if (chatAberto) return;

Â  Â Â 

Â  Â  const chatModal = document.getElementById('chat-modal');

Â  Â  chatModal.style.display = 'flex';

Â  Â  document.getElementById('chat-input').focus();

Â  Â  chatAberto = true;

Â  Â Â 

Â  Â  rolarParaUltimaMensagem();

Â  Â  iniciarChatAtendente();

}



function fecharChat() {

Â  Â  document.getElementById('chat-modal').style.display = 'none';

Â  Â  chatAberto = false;

Â  Â Â 

Â  Â  if (chatAtivo) {

Â  Â  Â  Â  clearInterval(chatAtivo);

Â  Â  Â  Â  chatAtivo = null;

Â  Â  }

}



function rolarParaUltimaMensagem() {

Â  Â  const chatMensagens = document.getElementById('chat-mensagens');

Â  Â  chatMensagens.scrollTop = chatMensagens.scrollHeight;

}



function iniciarChatAtendente() {

Â  Â  if (!chatAtivo) {

Â  Â  Â  Â  chatAtivo = setInterval(async () => {

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const paciente = await getPacienteAtual();

Â  Â  Â  Â  Â  Â  Â  Â  if (!paciente) return;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  const mensagensNaoLidas = await buscarMensagensNaoLidas(paciente.id);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  for (const msg of mensagensNaoLidas) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderMensagem({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  texto: msg.get('texto'),

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tipo: 'atendente',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  hora: formatarHora(msg.createdAt)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  msg.set('lida', true);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await msg.save();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  if (mensagensNaoLidas.length > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rolarParaUltimaMensagem();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error('Erro ao verificar mensagens:', error);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }, 3000);

Â  Â  }

}



async function buscarMensagensNaoLidas(pacienteId) {

Â  Â  try {

Â  Â  Â  Â  const Chat = Parse.Object.extend('Chat');

Â  Â  Â  Â  const query = new Parse.Query(Chat);

Â  Â  Â  Â  query.equalTo('pacienteId', pacienteId);

Â  Â  Â  Â  query.equalTo('lida', false);

Â  Â  Â  Â  query.equalTo('tipo', 'atendente');

Â  Â  Â  Â  return await query.find();

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao buscar mensagens nÃ£o lidas:', error);

Â  Â  Â  Â  return [];

Â  Â  }

}



function formatarHora(data) {

Â  Â  return new Date(data).toLocaleTimeString('pt-BR', {Â 

Â  Â  Â  Â  hour: '2-digit',Â 

Â  Â  Â  Â  minute: '2-digit',

Â  Â  Â  Â  hour12: false

Â  Â  });

}



async function enviarMensagem() {

Â  Â  const input = document.getElementById('chat-input');

Â  Â  const texto = input.value.trim();

Â  Â Â 

Â  Â  if (!texto) return;

Â  Â Â 

Â  Â  try {

Â  Â  Â  Â  const paciente = await getPacienteAtual();

Â  Â  Â  Â  if (!paciente) throw new Error('Paciente nÃ£o encontrado');

Â  Â  Â  Â Â 

Â  Â  Â  Â  await salvarMensagem(paciente.id, texto);

Â  Â  Â  Â Â 

Â  Â  Â  Â  renderMensagem({

Â  Â  Â  Â  Â  Â  texto: texto,

Â  Â  Â  Â  Â  Â  tipo: 'usuario',

Â  Â  Â  Â  Â  Â  hora: formatarHora(new Date())

Â  Â  Â  Â  });

Â  Â  Â  Â Â 

Â  Â  Â  Â  input.value = '';

Â  Â  Â  Â  rolarParaUltimaMensagem();

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Simular resposta do atendente

Â  Â  Â  Â  setTimeout(async () => {

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  await salvarMensagem(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  paciente.id,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Recebemos sua mensagem. Um atendente responderÃ¡ em breve.',Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'atendente',Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  false

Â  Â  Â  Â  Â  Â  Â  Â  );

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error('Erro ao enviar resposta automÃ¡tica:', error);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }, 1000);

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao enviar mensagem:', error);

Â  Â  Â  Â  showAlert('error', 'Erro ao enviar mensagem: ' + error.message);

Â  Â  }

}



async function salvarMensagem(pacienteId, texto, tipo = 'usuario', lida = true) {

Â  Â  try {

Â  Â  Â  Â  const Chat = Parse.Object.extend('Chat');

Â  Â  Â  Â  const mensagem = new Chat();

Â  Â  Â  Â  mensagem.set('pacienteId', pacienteId);

Â  Â  Â  Â  mensagem.set('texto', texto);

Â  Â  Â  Â  mensagem.set('tipo', tipo);

Â  Â  Â  Â  mensagem.set('lida', lida);

Â  Â  Â  Â  return await mensagem.save();

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao salvar mensagem:', error);

Â  Â  Â  Â  throw error;

Â  Â  }

}



function renderMensagem({ texto, tipo, hora }) {

Â  Â  const chatMensagens = document.getElementById('chat-mensagens');

Â  Â Â 

Â  Â  // Limpa mensagens de estado se existirem

Â  Â  if (chatMensagens.querySelector('.loading-chat, .empty-chat, .error-chat')) {

Â  Â  Â  Â  chatMensagens.innerHTML = '';

Â  Â  }

Â  Â Â 

Â  Â  const divMensagem = document.createElement('div');

Â  Â  divMensagem.className = `mensagem ${tipo}`;

Â  Â Â 

Â  Â  divMensagem.innerHTML = `

Â  Â  Â  Â  <div class="mensagem-conteudo">

Â  Â  Â  Â  Â  Â  <p>${texto}</p>

Â  Â  Â  Â  Â  Â  <span class="hora-mensagem">${hora}</span>

Â  Â  Â  Â  </div>

Â  Â  `;

Â  Â Â 

Â  Â  chatMensagens.appendChild(divMensagem);

}



function showAlert(type, message) {

Â  Â  const alertDiv = document.createElement('div');

Â  Â  alertDiv.className = `alert ${type}`;

Â  Â  alertDiv.textContent = message;

Â  Â  document.body.prepend(alertDiv);

Â  Â Â 

Â  Â  setTimeout(() => {

Â  Â  Â  Â  alertDiv.style.opacity = '0';

Â  Â  Â  Â  setTimeout(() => alertDiv.remove(), 300);

Â  Â  }, 5000);

}



// Event listeners

document.getElementById('chat-input').addEventListener('keypress', function(e) {

Â  Â  if (e.key === 'Enter') {

Â  Â  Â  Â  enviarMensagem();

Â  Â  }

});



document.getElementById('chat-modal').addEventListener('click', function(e) {

Â  Â  if (e.target === this) {

Â  Â  Â  Â  fecharChat();

Â  Â  }

});



// Exporta funÃ§Ãµes globais

window.abrirChat = abrirChat;

window.fecharChat = fecharChat;

window.enviarMensagem = enviarMensagem;





scripts/medico.js:



document.addEventListener('DOMContentLoaded', async function() {

Â  Â  try {

Â  Â  Â  Â  const { user, dados: medico } = await checkAuth('medico');

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Atualizar UI

Â  Â  Â  Â  document.getElementById('medico-nome').textContent = medico.get('nome');

Â  Â  Â  Â  document.getElementById('medico-especialidade').textContent = medico.get('especialidade');

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Carregar consultas

Â  Â  Â  Â  await carregarConsultasDoDia(new Date());

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Event listeners

Â  Â  Â  Â  document.getElementById('prev-day').addEventListener('click', async () => {

Â  Â  Â  Â  Â  Â  const currentDate = new Date(document.getElementById('current-date').textContent);

Â  Â  Â  Â  Â  Â  currentDate.setDate(currentDate.getDate() - 1);

Â  Â  Â  Â  Â  Â  await carregarConsultasDoDia(currentDate);

Â  Â  Â  Â  });

Â  Â  Â  Â Â 

Â  Â  Â  Â  document.getElementById('next-day').addEventListener('click', async () => {

Â  Â  Â  Â  Â  Â  const currentDate = new Date(document.getElementById('current-date').textContent);

Â  Â  Â  Â  Â  Â  currentDate.setDate(currentDate.getDate() + 1);

Â  Â  Â  Â  Â  Â  await carregarConsultasDoDia(currentDate);

Â  Â  Â  Â  });

Â  Â  Â  Â Â 

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro:', error);

Â  Â  Â  Â  window.location.href = 'index.html';

Â  Â  }

});



async function carregarConsultasDoDia(date) {

Â  Â  const listaConsultas = document.getElementById('lista-consultas');

Â  Â  listaConsultas.innerHTML = '<p class="loading">Carregando consultas...</p>';

Â  Â Â 

Â  Â  try {

Â  Â  Â  Â  // Formatar data

Â  Â  Â  Â  const options = { weekday: 'long', day: 'numeric', month: 'long' };

Â  Â  Â  Â  document.getElementById('current-date').textContent = date.toLocaleDateString('pt-BR', options);

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Buscar consultas

Â  Â  Â  Â  const Consulta = Parse.Object.extend('Consulta');

Â  Â  Â  Â  const query = new Parse.Query(Consulta);

Â  Â  Â  Â Â 

Â  Â  Â  Â  const medicoQuery = new Parse.Query('Medico');

Â  Â  Â  Â  medicoQuery.equalTo('user', Parse.User.current());

Â  Â  Â  Â  const medico = await medicoQuery.first();

Â  Â  Â  Â Â 

Â  Â  Â  Â  query.equalTo('medico', medico);

Â  Â  Â  Â  query.greaterThanOrEqualTo('data', new Date(date.setHours(0, 0, 0)));

Â  Â  Â  Â  query.lessThan('data', new Date(date.setHours(23, 59, 59)));

Â  Â  Â  Â  query.include('paciente');

Â  Â  Â  Â  query.ascending('data');

Â  Â  Â  Â Â 

Â  Â  Â  Â  const consultas = await query.find();

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Renderizar consultas

Â  Â  Â  Â  listaConsultas.innerHTML = '';

Â  Â  Â  Â Â 

Â  Â  Â  Â  if (consultas.length === 0) {

Â  Â  Â  Â  Â  Â  listaConsultas.innerHTML = '<p class="empty">Nenhuma consulta agendada</p>';

Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  consultas.forEach(consulta => {

Â  Â  Â  Â  Â  Â  const item = document.createElement('div');

Â  Â  Â  Â  Â  Â  item.className = 'consulta-item';

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const paciente = consulta.get('paciente');

Â  Â  Â  Â  Â  Â  const data = new Date(consulta.get('data'));

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  item.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  <div class="consulta-horario">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${data.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="consulta-info">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>${paciente.get('nome')}</h4>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>${consulta.get('tipo')}</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="status ${consulta.get('status')}">${consulta.get('status')}</span>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="consulta-actions">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-confirm" onclick="confirmarConsulta('${consulta.id}')">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Confirmar

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-cancel" onclick="cancelarConsulta('${consulta.id}')">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancelar

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  listaConsultas.appendChild(item);

Â  Â  Â  Â  });

Â  Â  Â  Â Â 

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao carregar consultas:', error);

Â  Â  Â  Â  listaConsultas.innerHTML = '<p class="error">Erro ao carregar consultas</p>';

Â  Â  }

}



async function confirmarConsulta(consultaId) {

Â  Â  try {

Â  Â  Â  Â  const Consulta = Parse.Object.extend('Consulta');

Â  Â  Â  Â  const consulta = await new Parse.Query(Consulta).get(consultaId);

Â  Â  Â  Â Â 

Â  Â  Â  Â  consulta.set('status', 'confirmada');

Â  Â  Â  Â  await consulta.save();

Â  Â  Â  Â Â 

Â  Â  Â  Â  showAlert('success', 'Consulta confirmada!');

Â  Â  Â  Â  await carregarConsultasDoDia(new Date(consulta.get('data')));

Â  Â  Â  Â Â 

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao confirmar consulta:', error);

Â  Â  Â  Â  showAlert('error', 'Falha ao confirmar consulta');

Â  Â  }

}



async function cancelarConsulta(consultaId) {

Â  Â  if (!confirm('Tem certeza que deseja cancelar esta consulta?')) return;

Â  Â Â 

Â  Â  try {

Â  Â  Â  Â  const Consulta = Parse.Object.extend('Consulta');

Â  Â  Â  Â  const consulta = await new Parse.Query(Consulta).get(consultaId);

Â  Â  Â  Â Â 

Â  Â  Â  Â  consulta.set('status', 'cancelada');

Â  Â  Â  Â  await consulta.save();

Â  Â  Â  Â Â 

Â  Â  Â  Â  showAlert('success', 'Consulta cancelada!');

Â  Â  Â  Â  await carregarConsultasDoDia(new Date(consulta.get('data')));

Â  Â  Â  Â Â 

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao cancelar consulta:', error);

Â  Â  Â  Â  showAlert('error', 'Falha ao cancelar consulta');

Â  Â  }

}



function showAlert(type, message) {

Â  Â  const alertDiv = document.createElement('div');

Â  Â  alertDiv.className = `alert ${type}`;

Â  Â  alertDiv.textContent = message;

Â  Â  document.body.prepend(alertDiv);

Â  Â Â 

Â  Â  setTimeout(() => {

Â  Â  Â  Â  alertDiv.style.opacity = '0';

Â  Â  Â  Â  setTimeout(() => alertDiv.remove(), 300);

Â  Â  }, 5000);

}



// Exporta funÃ§Ãµes globais

window.confirmarConsulta = confirmarConsulta;

window.cancelarConsulta = cancelarConsulta;





scripts/paciente.js:



document.addEventListener('DOMContentLoaded', async function() {

Â  Â  try {

Â  Â  Â  Â  // Verifica autenticaÃ§Ã£o e obtÃ©m dados do paciente

Â  Â  Â  Â  const { user, dados: paciente } = await checkAuth('paciente');

Â  Â  Â  Â  if (!user || !paciente) throw new Error('Acesso negado');

Â  Â  Â  Â 

Â  Â  Â  Â  // Atualiza UI

Â  Â  Â  Â  document.getElementById('username').textContent = paciente.get('nome') || 'Paciente';

Â  Â  Â  Â 

Â  Â  Â  Â  // Configura menu mobile

Â  Â  Â  Â  setupMenuMobile();

Â  Â  Â  Â 

Â  Â  Â  Â  // Carrega dados iniciais

Â  Â  Â  Â  await carregarMedicosDisponiveis();

Â  Â  Â  Â  await carregarAgendamentos();



Â  Â  Â  Â  // Configura listeners

Â  Â  Â  Â  setupEventListeners();



Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro na inicializaÃ§Ã£o:', error);

Â  Â  Â  Â  window.location.href = 'index.html';

Â  Â  }

});



// Configura menu mobile

function setupMenuMobile() {

Â  Â  const menuToggle = document.createElement('div');

Â  Â  menuToggle.className = 'menu-toggle';

Â  Â  menuToggle.innerHTML = 'â˜°';

Â  Â  document.body.appendChild(menuToggle);

Â  Â 

Â  Â  menuToggle.addEventListener('click', () => {

Â  Â  Â  Â  document.querySelector('.sidebar').classList.toggle('active');

Â  Â  });

Â  Â 

Â  Â  window.addEventListener('resize', () => {

Â  Â  Â  Â  menuToggle.style.display = window.innerWidth <= 992 ? 'flex' : 'none';

Â  Â  Â  Â  if (window.innerWidth > 992) {

Â  Â  Â  Â  Â  Â  document.querySelector('.sidebar').classList.remove('active');

Â  Â  Â  Â  }

Â  Â  });

}



// Configura event listeners

function setupEventListeners() {

Â  Â  document.getElementById('form-agendamento').addEventListener('submit', async (e) => {

Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  await agendarConsulta();

Â  Â  });

}



// Carrega mÃ©dicos disponÃ­veis

async function carregarMedicosDisponiveis() {

Â  Â  const selectMedico = document.getElementById('medico');

Â  Â  selectMedico.innerHTML = '<option value="">Carregando mÃ©dicos...</option>';

Â  Â 

Â  Â  try {

Â  Â  Â  Â  const Medico = Parse.Object.extend('Medico');

Â  Â  Â  Â  const query = new Parse.Query(Medico);

Â  Â  Â  Â 

Â  Â  Â  Â  query.equalTo('ativo', true);

Â  Â  Â  Â  query.include(['user', 'especialidade']);

Â  Â  Â  Â  query.ascending('nome');

Â  Â  Â  Â 

Â  Â  Â  Â  const medicos = await query.find();

Â  Â  Â  Â 

Â  Â  Â  Â  selectMedico.innerHTML = medicos.length > 0

Â  Â  Â  Â  Â  Â  ? '<option value="">Selecione um mÃ©dico</option>'

Â  Â  Â  Â  Â  Â  : '<option value="">Nenhum mÃ©dico disponÃ­vel</option>';

Â  Â  Â  Â 

Â  Â  Â  Â  medicos.forEach(medico => {

Â  Â  Â  Â  Â  Â  const option = document.createElement('option');

Â  Â  Â  Â  Â  Â  option.value = medico.id;

Â  Â  Â  Â  Â  Â  option.textContent = `Dr. ${medico.get('nome')} - ${medico.get('especialidade')}`;

Â  Â  Â  Â  Â  Â  selectMedico.appendChild(option);

Â  Â  Â  Â  });



Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao carregar mÃ©dicos:', error);

Â  Â  Â  Â  selectMedico.innerHTML = '<option value="">Erro ao carregar</option>';

Â  Â  Â  Â  showAlert('error', 'Falha ao carregar lista de mÃ©dicos');

Â  Â  }

}



// Agenda nova consulta (CORRIGIDO o schema mismatch)

async function agendarConsulta() {

Â  Â  const form = document.getElementById('form-agendamento');

Â  Â  const tipoConsulta = document.getElementById('tipo-consulta').value;

Â  Â  const dataHora = document.getElementById('data-consulta').value;

Â  Â  const medicoId = document.getElementById('medico').value;



Â  Â  // ValidaÃ§Ã£o

Â  Â  if (!tipoConsulta || !dataHora || !medicoId) {

Â  Â  Â  Â  showAlert('error', 'Preencha todos os campos corretamente!');

Â  Â  Â  Â  return;

Â  Â  }



Â  Â  try {

Â  Â  Â  Â  // 1. Busca o mÃ©dico e seu usuÃ¡rio associado

Â  Â  Â  Â  const Medico = Parse.Object.extend('Medico');

Â  Â  Â  Â  const medicoQuery = new Parse.Query(Medico);

Â  Â  Â  Â  medicoQuery.include('user');

Â  Â  Â  Â  const medico = await medicoQuery.get(medicoId);

Â  Â  Â  Â 

Â  Â  Â  Â  if (!medico || !medico.get('user')) {

Â  Â  Â  Â  Â  Â  throw new Error('MÃ©dico nÃ£o encontrado');

Â  Â  Â  Â  }



Â  Â  Â  Â  // 2. Busca o paciente e seu usuÃ¡rio associado

Â  Â  Â  Â  const Paciente = Parse.Object.extend('Paciente');

Â  Â  Â  Â  const paciente = await new Parse.Query(Paciente)

Â  Â  Â  Â  Â  Â  .equalTo('user', Parse.User.current())

Â  Â  Â  Â  Â  Â  .first();



Â  Â  Â  Â  if (!paciente || !paciente.get('user')) {

Â  Â  Â  Â  Â  Â  throw new Error('Paciente nÃ£o encontrado');

Â  Â  Â  Â  }



Â  Â  Â  Â  // 3. Cria e salva a consulta

Â  Â  Â  Â  const Consulta = Parse.Object.extend('Consulta');

Â  Â  Â  Â  const novaConsulta = new Consulta();

Â  Â  Â  Â 

Â  Â  Â  Â  const dataConsulta = new Date(dataHora);

Â  Â  Â  Â  if (isNaN(dataConsulta.getTime())) {

Â  Â  Â  Â  Â  Â  throw new Error('Data invÃ¡lida');

Â  Â  Â  Â  }



Â  Â  Â  Â  // CORREÃ‡ÃƒO: Usa os objetos User associados

Â  Â  Â  Â  novaConsulta.set('medico', medico.get('user'));

Â  Â  Â  Â  novaConsulta.set('paciente', paciente.get('user'));

Â  Â  Â  Â  novaConsulta.set('tipo', tipoConsulta);

Â  Â  Â  Â  novaConsulta.set('data', dataConsulta);

Â  Â  Â  Â  novaConsulta.set('status', 'pendente');



Â  Â  Â  Â  await novaConsulta.save();

Â  Â  Â  Â 

Â  Â  Â  Â  // Feedback

Â  Â  Â  Â  showAlert('success', 'Consulta agendada com sucesso!');

Â  Â  Â  Â  form.reset();

Â  Â  Â  Â  await carregarAgendamentos();



Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao agendar:', error);

Â  Â  Â  Â  showAlert('error', `Falha no agendamento: ${error.message}`);

Â  Â  }

}



// Carrega agendamentos do paciente

async function carregarAgendamentos() {

Â  Â  const listaAgendamentos = document.getElementById('lista-agendamentos');

Â  Â  listaAgendamentos.innerHTML = '<p class="loading">Carregando agendamentos...</p>';

Â  Â 

Â  Â  try {

Â  Â  Â  Â  // Busca o paciente e suas consultas

Â  Â  Â  Â  const Paciente = Parse.Object.extend('Paciente');

Â  Â  Â  Â  const paciente = await new Parse.Query(Paciente)

Â  Â  Â  Â  Â  Â  .equalTo('user', Parse.User.current())

Â  Â  Â  Â  Â  Â  .first();



Â  Â  Â  Â  if (!paciente) throw new Error('Paciente nÃ£o encontrado');



Â  Â  Â  Â  const Consulta = Parse.Object.extend('Consulta');

Â  Â  Â  Â  const query = new Parse.Query(Consulta);

Â  Â  Â  Â 

Â  Â  Â  Â  query.equalTo('paciente', paciente.get('user'));

Â  Â  Â  Â  query.greaterThanOrEqualTo('data', new Date());

Â  Â  Â  Â  query.ascending('data');

Â  Â  Â  Â  query.include(['medico', 'paciente']);

Â  Â  Â  Â 

Â  Â  Â  Â  const consultas = await query.find();

Â  Â  Â  Â 

Â  Â  Â  Â  // Renderiza

Â  Â  Â  Â  listaAgendamentos.innerHTML = consultas.length > 0

Â  Â  Â  Â  Â  Â  ? ''

Â  Â  Â  Â  Â  Â  : '<p class="empty">Nenhuma consulta agendada</p>';

Â  Â  Â  Â 

Â  Â  Â  Â  consultas.forEach(consulta => {

Â  Â  Â  Â  Â  Â  const medico = consulta.get('medico');

Â  Â  Â  Â  Â  Â  const data = new Date(consulta.get('data'));

Â  Â  Â  Â  Â  Â 

Â  Â  Â  Â  Â  Â  const item = document.createElement('div');

Â  Â  Â  Â  Â  Â  item.className = 'agendamento-item';

Â  Â  Â  Â  Â  Â  item.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  <div class="agendamento-data">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${data.toLocaleDateString('pt-BR')} Ã s ${data.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'})}

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="agendamento-info">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>${consulta.get('tipo')}</h4>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Com Dr. ${medico.get('nome')}</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="status ${consulta.get('status')}">${consulta.get('status')}</span>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-cancel" onclick="cancelarAgendamento('${consulta.id}')">Cancelar</button>

Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  listaAgendamentos.appendChild(item);

Â  Â  Â  Â  });



Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao carregar agendamentos:', error);

Â  Â  Â  Â  listaAgendamentos.innerHTML = '<p class="error">Erro ao carregar consultas</p>';

Â  Â  }

}



// Cancela um agendamento

async function cancelarAgendamento(consultaId) {

Â  Â  if (!confirm('Deseja realmente cancelar esta consulta?')) return;

Â  Â 

Â  Â  try {

Â  Â  Â  Â  const Consulta = Parse.Object.extend('Consulta');

Â  Â  Â  Â  const consulta = await new Parse.Query(Consulta).get(consultaId);

Â  Â  Â  Â  await consulta.destroy();

Â  Â  Â  Â 

Â  Â  Â  Â  showAlert('success', 'Consulta cancelada com sucesso!');

Â  Â  Â  Â  await carregarAgendamentos();

Â  Â  Â  Â 

Â  Â  } catch (error) {

Â  Â  Â  Â  console.error('Erro ao cancelar:', error);

Â  Â  Â  Â  showAlert('error', 'Falha ao cancelar consulta');

Â  Â  }

}



// Mostra alertas

function showAlert(type, message) {

Â  Â  const alertDiv = document.createElement('div');

Â  Â  alertDiv.className = `alert ${type}`;

Â  Â  alertDiv.textContent = message;

Â  Â  document.body.prepend(alertDiv);

Â  Â 

Â  Â  setTimeout(() => {

Â  Â  Â  Â  alertDiv.style.opacity = '0';

Â  Â  Â  Â  setTimeout(() => alertDiv.remove(), 300);

Â  Â  }, 5000);

}



// Exporta funÃ§Ãµes globais

window.cancelarAgendamento = cancelarAgendamento;





scripts/parseConfig.js:



// ConfiguraÃ§Ã£o do Parse/Back4App

(function() {

Â  Â  Parse.initialize(

Â  Â  Â  Â  "bOFYz8xlcuDmnYIAKE06FpKMDh4zZXjwUQk3HgeD",

Â  Â  Â  Â  "Ct8Ktu8KYcruwQALT7FOkvAZSkIhUXfO2IcB2uCU"

Â  Â  );

Â  Â  Parse.serverURL = 'https://parseapi.back4app.com/';

Â  Â  console.log('Parse configurado com sucesso');

})();



Aqui estÃ£o todos os codigos, analise tudo pf